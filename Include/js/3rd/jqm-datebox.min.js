(function(e){e.widget("mobile.datebox",e.mobile.widget,{options:{version:"2-1.4.0-2013070300",mobVer:parseInt(e.mobile.version.replace(/\./g,"")),theme:false,themeDefault:"a",themeHeader:"a",mode:false,centerHoriz:false,centerVert:false,transition:"pop",useAnimation:true,hideInput:false,hideFixedToolbars:false,lockInput:true,enhanceInput:true,zindex:"500",clickEvent:"vclick",clickEventAlt:"click",resizeListener:true,defaultValue:false,showInitialValue:false,dialogEnable:false,dialogForce:false,enablePopup:false,popupPosition:false,popupForceX:false,popupForceY:false,useModal:false,useInline:false,useInlineBlind:false,useHeader:true,useImmediate:false,useNewStyle:false,useAltIcon:false,overrideStyleClass:false,useButton:true,useFocus:false,useClearButton:false,useCollapsedBut:false,usePlaceholder:false,openCallback:false,openCallbackArgs:[],closeCallback:false,closeCallbackArgs:[],startOffsetYears:false,startOffsetMonths:false,startOffsetDays:false,afterToday:false,beforeToday:false,notToday:false,maxDays:false,minDays:false,maxYear:false,minYear:false,blackDates:false,blackDatesRec:false,blackDays:false,minHour:false,maxHour:false,minuteStep:1,minuteStepRound:0,rolloverMode:{m:true,d:true,h:true,i:true,s:true},useLang:"default",lang:{"default":{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",calTodayButtonLabel:"Jump to Today",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:24,headerFormat:"%A, %B %-d, %Y",tooltip:"Open Date Picker",nextMonth:"Next Month",prevMonth:"Previous Month",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",useArabicIndic:false,isRTL:false,calStartDay:0,clearButton:"Clear",durationOrder:["d","h","i","s"],meridiem:["AM","PM"],timeOutput:"%k:%M",durationFormat:"%Dd %DA, %Dl:%DM:%DS",calDateListLabel:"Other Dates",calHeaderFormat:"%B %Y"}}},_enhanceDate:function(){e.extend(this._date.prototype,{copy:function(e,t){if(typeof e==="undefined"){e=[0,0,0,0,0,0,0]}if(typeof t==="undefined"){t=[0,0,0,0,0,0,0]}while(e.length<7){e.push(0)}while(t.length<7){t.push(0)}return new Date(t[0]>0?t[0]:this.getFullYear()+e[0],t[1]>0?t[1]:this.getMonth()+e[1],t[2]>0?t[2]:this.getDate()+e[2],t[3]>0?t[3]:this.getHours()+e[3],t[4]>0?t[4]:this.getMinutes()+e[4],t[5]>0?t[5]:this.getSeconds()+e[5],t[6]>0?t[5]:this.getMilliseconds()+e[6])},adj:function(e,t){if(typeof t!=="number"){throw new Error("Adjustment value not specified")}if(typeof e!=="number"){throw new Error("Adjustment type not specified")}switch(e){case 0:this.setFullYear(this.getFullYear()+t);break;case 1:this.setMonth(this.getMonth()+t);break;case 2:this.setDate(this.getDate()+t);break;case 3:this.setHours(this.getHours()+t);break;case 4:this.setMinutes(this.getMinutes()+t);break;case 5:this.setSeconds(this.getSeconds()+t);break;case 6:this.setMilliseconds(this.getMilliseconds()+t);break}return this},setD:function(e,t){switch(e){case 0:this.setFullYear(t);break;case 1:this.setMonth(t);break;case 2:this.setDate(t);break;case 3:this.setHours(t);break;case 4:this.setMinutes(t);break;case 5:this.setSeconds(t);break;case 6:this.setMilliseconds(t);break}return this},get:function(e){switch(e){case 0:return this.getFullYear();case 1:return this.getMonth();case 2:return this.getDate();case 3:return this.getHours();case 4:return this.getMinutes();case 5:return this.getSeconds()}return false},iso:function(){return String(this.getFullYear())+"-"+(this.getMonth()<9?"0":"")+String(this.getMonth()+1)+"-"+(this.getDate()<10?"0":"")+String(this.getDate())},comp:function(){return parseInt(this.iso().replace(/-/g,""),10)},getEpoch:function(){return(this.getTime()-this.getMilliseconds())/1e3},getArray:function(){return[this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds()]},setFirstDay:function(e){this.setD(2,1).adj(2,e-this.getDay());if(this.get(2)>10){this.adj(2,7)}return this},setDWeek:function(e,t){if(e===4){return this.setD(1,0).setD(2,1).setFirstDay(4).adj(2,-3).adj(2,(t-1)*7)}return this.setD(1,0).setD(2,1).setFirstDay(e).adj(2,(t-1)*7)},getDWeek:function(e){var t,a;switch(e){case 0:t=this.copy([0,-1*this.getMonth()]).setFirstDay(0);return Math.floor((this.getTime()-(t.getTime()+(this.getTimezoneOffset()-t.getTimezoneOffset())*6e4))/6048e5)+1;case 1:t=this.copy([0,-1*this.getMonth()]).setFirstDay(1);return Math.floor((this.getTime()-(t.getTime()+(this.getTimezoneOffset()-t.getTimezoneOffset())*6e4))/6048e5)+1;case 4:if(this.getMonth()===11&&this.getDate()>28){return 1}t=this.copy([0,-1*this.getMonth()],true).setFirstDay(4).adj(2,-3);a=Math.floor((this.getTime()-(t.getTime()+(this.getTimezoneOffset()-t.getTimezoneOffset())*6e4))/6048e5)+1;if(a<1){t=this.copy([-1,-1*this.getMonth()]).setFirstDay(4).adj(2,-3);return Math.floor((this.getTime()-t.getTime())/6048e5)+1}return a;default:return 0}}})},_event:function(t,a){var i=e(this).data(parseInt(e.mobile.version.replace(/\./g,""),10)>110?"mobile-datebox":"datebox");if(!t.isPropagationStopped()){switch(a.method){case"close":i.close();break;case"open":i.open();break;case"set":e(this).val(a.value);e(this).trigger("change");break;case"doset":if(e.isFunction(i["_"+i.options.mode+"DoSet"])){i["_"+i.options.mode+"DoSet"].apply(i,[])}else{e(this).trigger("datebox",{method:"set",value:i._formatter(i.__fmt(),i.theDate),date:i.theDate})}break;case"dooffset":if(a.type){i._offset(a.type,a.amount,true)}break;case"dorefresh":i.refresh();break;case"doreset":i.hardreset();break;case"doclear":e(this).val("").trigger("change");break;case"clear":e(this).trigger("change")}}},_hoover:function(t){e(t).toggleClass("ui-btn-up-"+e(t).jqmData("theme")+" ui-btn-down-"+e(t).jqmData("theme"))},_ord:{"default":function(e){var t=e%10;if(e>9&&e<21){return"th"}if(t>3){return"th"}return["th","st","nd","rd"][t]}},__:function(e){var t=this.options,a="override"+e.charAt(0).toUpperCase()+e.slice(1);if(typeof t[a]!=="undefined"){return t[a]}if(typeof t.lang[t.useLang][e]!=="undefined"){return t.lang[t.useLang][e]}if(typeof t[t.mode+"lang"]!=="undefined"&&typeof t[t.mode+"lang"][e]!=="undefined"){return t[t.mode+"lang"][e]}return t.lang["default"][e]},__fmt:function(){var e=this,t=this.options;switch(t.mode){case"timebox":case"timeflipbox":return e.__("timeOutput");case"durationbox":case"durationflipbox":return e.__("durationFormat");default:return e.__("dateFormat")}},_zPad:function(e){return e<10?"0"+String(e):String(e)},_dRep:function(e,t){var a=48,i=57,n=1584,s=null,r=null,o="";if(t===-1){a+=n;i+=n;n=-1584}for(s=0;s<e.length;s++){r=e.charCodeAt(s);if(r>=a&&r<=i){o=o+String.fromCharCode(r+n)}else{o=o+String.fromCharCode(r)}}return o},_doIndic:function(){var t=this;t.d.intHTML.find("*").each(function(){if(e(this).children().length<1){e(this).text(t._dRep(e(this).text()))}else if(e(this).hasClass("ui-datebox-slideday")){e(this).html(t._dRep(e(this).html()))}});t.d.intHTML.find("input").each(function(){e(this).val(t._dRep(e(this).val()))})},_parser:{"default":function(e){return false}},_n:function(e,t){return e<0?t:e},_pa:function(e,t){if(typeof t==="boolean"){return new this._date(e[0],e[1],e[2],0,0,0,0)}return new this._date(t.getFullYear(),t.getMonth(),t.getDate(),e[0],e[1],e[2],0)},_makeDate:function(t){t=e.trim(this.__("useArabicIndic")===true?this._dRep(t,-1):t);var a=this,i=this.options,n=a.__fmt(),s=null,r=[],o=null,d=null,l=new a._date,u={year:-1,mont:-1,date:-1,hour:-1,mins:-1,secs:-1,week:false,wtyp:4,wday:false,yday:false,meri:0},f;if(typeof i.mode==="undefined"){return l}if(typeof a._parser[i.mode]!=="undefined"){return a._parser[i.mode].apply(a,[t])}if(i.mode==="durationbox"||i.mode==="durationflipbox"){n=n.replace(/%D([a-z])/gi,function(e,t){switch(t){case"d":case"l":case"M":case"S":return"("+e+"|"+"[0-9]+"+")";default:return".+?"}});n=new RegExp("^"+n+"$");s=n.exec(t);o=n.exec(a.__fmt());if(s===null||s.length!==o.length){if(typeof i.defaultValue==="number"&&i.defaultValue>0){return new a._date((a.initDate.getEpoch()+parseInt(i.defaultValue,10))*1e3)}return new a._date(a.initDate.getTime())}d=a.initDate.getEpoch();for(f=0;f<s.length;f++){if(o[f].match(/^%Dd$/i)){d=d+parseInt(s[f],10)*60*60*24}if(o[f].match(/^%Dl$/i)){d=d+parseInt(s[f],10)*60*60}if(o[f].match(/^%DM$/i)){d=d+parseInt(s[f],10)*60}if(o[f].match(/^%DS$/i)){d=d+parseInt(s[f],10)}}return new a._date(d*1e3)}n=n.replace(/%(0|-)*([a-z])/gi,function(e,t,a){r.push(a);switch(a){case"p":case"P":case"b":case"B":return"("+e+"|"+".+?"+")";case"H":case"k":case"I":case"l":case"m":case"M":case"S":case"V":case"U":case"u":case"W":case"d":return"("+e+"|"+(t==="-"?"[0-9]{1,2}":"[0-9]{2}")+")";case"j":return"("+e+"|"+"[0-9]{3}"+")";case"s":return"("+e+"|"+"[0-9]+"+")";case"g":case"y":return"("+e+"|"+"[0-9]{2}"+")";case"E":case"G":case"Y":return"("+e+"|"+"[0-9]{1,4}"+")";default:r.pop();return".+?"}});n=new RegExp("^"+n+"$");s=n.exec(t);o=n.exec(a.__fmt());if(s===null||s.length!==o.length){if(i.defaultValue!==false){switch(typeof i.defaultValue){case"object":if(i.defaultValue.length===3){l=a._pa(i.defaultValue,i.mode==="timebox"||i.mode==="timeflipbox"?l:false)}break;case"number":l=new a._date(i.defaultValue*1e3);break;case"string":if(i.mode==="timebox"||i.mode==="timeflipbox"){d=i.defaultValue.split(":");if(d.length===3){l=a._pa([d[0],d[1],d[2]],l)}else if(d.length===2){l=a._pa([d[0],d[1],0],l)}}else{d=i.defaultValue.split("-");if(d.length===3){l=a._pa([d[0],d[1]-1,d[2]],false)}}break}}if(isNaN(l.getDate())){l=new a._date}}else{for(f=1;f<s.length;f++){switch(r[f-1]){case"s":return new a._date(parseInt(s[f],10)*1e3);case"Y":case"G":u.year=parseInt(s[f],10);break;case"E":u.year=parseInt(s[f],10)-543;break;case"y":case"g":if(i.afterToday===true||parseInt(s[f],10)<38){u.year=parseInt("20"+s[f],10)}else{u.year=parseInt("19"+s[f],10)}break;case"m":u.mont=parseInt(s[f],10)-1;break;case"d":u.date=parseInt(s[f],10);break;case"H":case"k":case"I":case"l":u.hour=parseInt(s[f],10);break;case"M":u.mins=parseInt(s[f],10);break;case"S":u.secs=parseInt(s[f],10);break;case"u":u.wday=parseInt(s[f],10)-1;break;case"w":u.wday=parseInt(s[f],10);break;case"j":u.yday=parseInt(s[f],10);break;case"V":u.week=parseInt(s[f],10);u.wtyp=4;break;case"U":u.week=parseInt(s[f],10);u.wtyp=0;break;case"W":u.week=parseInt(s[f],10);u.wtyp=1;break;case"p":case"P":u.meri=s[f].toLowerCase()===a.__("meridiem")[0].toLowerCase()?-1:1;break;case"b":d=e.inArray(s[f],a.__("monthsOfYearShort"));if(d>-1){u.mont=d}break;case"B":d=e.inArray(s[f],a.__("monthsOfYear"));if(d>-1){u.mont=d}break}}if(u.meri!==0){if(u.meri===-1&&u.hour===12){u.hour=0}if(u.meri===1&&u.hour!==12){u.hour=u.hour+12}}l=new a._date(a._n(u.year,0),a._n(u.mont,0),a._n(u.date,1),a._n(u.hour,0),a._n(u.mins,0),a._n(u.secs,0),0);if(u.year<100&&u.year!==-1){l.setFullYear(u.year)}if(u.mont>-1&&u.date>-1||u.hour>-1&&u.mins>-1&&u.secs>-1){return l}if(u.week!==false){l.setDWeek(u.wtyp,u.week);if(u.date>-1){l.setDate(u.date)}}if(u.yday!==false){l.setD(1,0).setD(2,1).adj(2,u.yday-1)}if(u.wday!==false){l.adj(2,u.wday-l.getDay())}}return l},_customformat:{"default":function(e,t){return false}},_formatter:function(e,t){var a=this,i=this.options,n,s={part:[0,0,0,0],tp:0};if(i.mode==="durationbox"||i.mode==="durationflipbox"){s.tp=this.theDate.getEpoch()-this.initDate.getEpoch();s.part[0]=parseInt(s.tp/(60*60*24),10);s.tp-=s.part[0]*60*60*24;s.part[1]=parseInt(s.tp/(60*60),10);s.tp-=s.part[1]*60*60;s.part[2]=parseInt(s.tp/60,10);s.tp-=s.part[2]*60;s.part[3]=s.tp;if(!e.match(/%Dd/)){s.part[1]+=s.part[0]*24}if(!e.match(/%Dl/)){s.part[2]+=s.part[1]*60}if(!e.match(/%DM/)){s.part[3]+=s.part[2]*60}}e=e.replace(/%(D|X|0|-)*([1-9a-zA-Z])/g,function(e,r,o){if(r==="X"){if(typeof a._customformat[i.mode]!=="undefined"){return a._customformat[i.mode](o,t,i)}return e}if(r==="D"){switch(o){case"d":return s.part[0];case"l":return a._zPad(s.part[1]);case"M":return a._zPad(s.part[2]);case"S":return a._zPad(s.part[3]);case"A":return s.part[0]>1?a.__("durationDays")[1]:a.__("durationDays")[0];default:return e}}switch(o){case"%":return"%";case"a":return a.__("daysOfWeekShort")[t.getDay()];case"A":return a.__("daysOfWeek")[t.getDay()];case"b":return a.__("monthsOfYearShort")[t.getMonth()];case"B":return a.__("monthsOfYear")[t.getMonth()];case"C":return t.getFullYear().toString().substr(0,2);case"d":return r==="-"?t.getDate():a._zPad(t.getDate());case"H":case"k":return r==="-"?t.getHours():a._zPad(t.getHours());case"I":case"l":return r==="-"?t.getHours()===0||t.getHours()===12?12:t.getHours()<12?t.getHours():t.getHours()-12:a._zPad(t.getHours()===0||t.getHours()===12?12:t.getHours()<12?t.getHours():t.getHours()-12);case"m":return r==="-"?t.getMonth()+1:a._zPad(t.getMonth()+1);case"M":return r==="-"?t.getMinutes():a._zPad(t.getMinutes());case"p":return t.getHours()<12?a.__("meridiem")[0].toUpperCase():a.__("meridiem")[1].toUpperCase();case"P":return t.getHours()<12?a.__("meridiem")[0].toLowerCase():a.__("meridiem")[1].toLowerCase();case"s":return t.getEpoch();case"S":return r==="-"?t.getSeconds():a._zPad(t.getSeconds());case"u":return r==="-"?t.getDay()+1:a._zPad(t.getDay()+1);case"w":return t.getDay();case"y":return t.getFullYear().toString().substr(2,2);case"Y":return t.getFullYear();case"E":return t.getFullYear()+543;case"V":return r==="-"?t.getDWeek(4):a._zPad(t.getDWeek(4));case"U":return r==="-"?t.getDWeek(0):a._zPad(t.getDWeek(0));case"W":return r==="-"?t.getDWeek(1):a._zPad(t.getDWeek(1));case"o":if(typeof a._ord[i.useLang]!=="undefined"){return a._ord[i.useLang](t.getDate())}return a._ord["default"](t.getDate());case"j":n=new Date(t.getFullYear(),0,1);n=Math.ceil((t-n)/864e5)+1;return(n<100?n<10?"00":"0":"")+String(n);case"G":if(t.getDWeek(4)===1&&t.getMonth()>0){return t.getFullYear()+1}if(t.getDWeek(4)>51&&t.getMonth()<11){return t.getFullYear()-1}return t.getFullYear();case"g":if(t.getDWeek(4)===1&&t.getMonth()>0){return parseInt(t.getFullYear().toString().substr(2,2),10)+1}if(t.getDWeek(4)>51&&t.getMonth()<11){return parseInt(t.getFullYear().toString().substr(2,2),10)-1}return t.getFullYear().toString().substr(2,2);default:return e}});if(a.__("useArabicIndic")===true){e=a._dRep(e)}return e},_btwn:function(e,t,a){return e>t&&e<a},_minStepFix:function(){var e=this.theDate.get(4),t,a=this,i=this.options;if(i.minuteStep>1&&e%i.minuteStep>0){if(i.minuteStepRound<0){e=e-e%i.minuteStep}else if(i.minStepRound>0){e=e+(i.minuteStep-e%i.minuteStep)}else{if(e%i.minuteStep<i.minuteStep/2){e=e-e%i.minuteStep}else{e=e+(i.minuteStep-e%i.minuteStep)}}a.theDate.setMinutes(e)}},_offset:function(t,a,i){var n=this,s=this.options,r=false;t=(t||"").toLowerCase();if(typeof i==="undefined"){i=true}n.d.input.trigger("datebox",{method:"offset",type:t,amount:a});if(t!=="a"&&(typeof s.rolloverMode[t]==="undefined"||s.rolloverMode[t]===true)){r=e.inArray(t,["y","m","d","h","i","s"])}else{switch(t){case"y":r=0;break;case"m":if(n._btwn(n.theDate.getMonth()+a,-1,12)){r=1}break;case"d":if(n._btwn(n.theDate.getDate()+a,0,32-n.theDate.copy([0],[0,0,32,13]).getDate()+1)){r=2}break;case"h":if(n._btwn(n.theDate.getHours()+a,-1,24)){r=3}break;case"i":if(n._btwn(n.theDate.getMinutes()+a,-1,60)){r=4}break;case"s":if(n._btwn(n.theDate.getSeconds()+a,-1,60)){r=5}break;case"a":n._offset("h",(a>0?1:-1)*12,false);break}}if(r!==false){n.theDate.adj(r,a)}if(i===true){n.refresh()}if(s.useImmediate){n.d.input.trigger("datebox",{method:"doset"})}},_startOffset:function(e){var t=this.options;if(t.startOffsetYears!==false){e.adj(0,t.startOffsetYears)}if(t.startOffsetMonths!==false){e.adj(1,t.startOffsetMonths)}if(t.startOffsetDays!==false){e.adj(2,t.startOffsetDays)}return e},_create:function(){e(document).trigger("dateboxcreate");var t=this,a=e.extend(this.options,typeof this.element.jqmData("options")!=="undefined"?this.element.jqmData("options"):this._getLongOptions(this.element)),i=a.theme===false&&typeof e(this).jqmData("theme")==="undefined"?typeof this.element.parentsUntil(":jqmData(theme)").parent().jqmData("theme")==="undefined"?a.themeDefault:this.element.parentsUntil(":jqmData(theme)").parent().jqmData("theme"):a.theme,n=a.useAnimation?a.transition:"none",s=a.useNewStyle===false?{input:this.element,wrap:this.element.wrap('<div class="ui-input-datebox ui-shadow-inset ui-corner-all '+(this.element.jqmData("mini")===true?"ui-mini ":"")+"ui-body-"+i+'"></div>').parent(),mainWrap:e("<div>",{"class":"ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden "+n+" ui-body-"+i}).css("zIndex",a.zindex),intHTML:false}:{input:this.element,wrap:this.element,mainWrap:e("<div>",{"class":"ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden "+n+" ui-body-"+i}).css("zIndex",a.zindex),intHTML:false},r=typeof window.ontouchstart!=="undefined",o={eStart:(r?"touchstart":"mousedown")+".datebox",eMove:(r?"touchmove":"mousemove")+".datebox",eEnd:(r?"touchend":"mouseup")+".datebox",eEndA:r?"mouseup.datebox touchend.datebox touchcancel.datebox touchmove.datebox":"mouseup.datebox",move:false,start:false,end:false,pos:false,target:false,delta:false,tmp:false},d={},l=typeof e.mobile.ns!=="undefined"?e.mobile.ns:"";e.extend(t,{d:s,ns:l,drag:o,touch:r});if(a.usePlaceholder!==false){if(a.usePlaceholder===true&&t._grabLabel()!==false){t.d.input.attr("placeholder",t._grabLabel())}if(typeof a.usePlaceholder==="string"){t.d.input.attr("placeholder",a.usePlaceholder)}}a.theme=i;t.clearFunc=false;t.disabled=false;t.runButton=false;t._date=window.Date;t._enhanceDate();t.baseID=t.d.input.attr("id");t.initDate=new t._date;t.theDate=a.defaultValue?t._makeDate(a.defaultValue):t.d.input.val()!==""?t._makeDate(t.d.input.val()):new t._date;t.initDone=false;if(a.showInitialValue===true){t.d.input.val(t._formatter(t.__fmt(),t.theDate))}if(a.useButton===true&&a.useInline===false&&a.useNewStyle===false){t.d.open=e('<a href="#" class="ui-input-clear" title="'+this.__("tooltip")+'">'+this.__("tooltip")+"</a>").on(a.clickEvent,function(a){a.preventDefault();if(!t.disabled){t.d.input.trigger("datebox",{method:"open"});t.d.wrap.parent().addClass("ui-focus");t.d.input.parent().removeClass("ui-focus")}setTimeout(function(){e(a.target).closest("a").removeClass(e.mobile.activeBtnClass)},300)}).appendTo(t.d.wrap).buttonMarkup({icon:"grid",iconpos:"notext",corners:true,shadow:true}).css({"vertical-align":"middle",display:"inline-block"})}t.d.screen=e("<div>",{"class":"ui-datebox-screen ui-datebox-hidden"+(a.useModal?" ui-datebox-screen-modal":"")}).css({"z-index":a.zindex-1}).on(a.clickEventAlt,function(e){e.preventDefault();t.d.input.trigger("datebox",{method:"close"})});if(a.enhanceInput===true&&navigator.userAgent.match(/Android/i)){t.inputType="number"}else{t.inputType="text"}if(a.hideInput){t.d.wrap.parent().hide()}if(a.mobVer<140){e("label[for='"+t.d.input.attr("id")+"']").addClass("ui-input-text").css("verticalAlign","middle")}t.d.wrap.on(a.clickEvent,function(){if(!t.disabled&&(a.noButtonFocusMode||a.focusMode)){t.d.input.trigger("datebox",{method:"open"});t.d.wrap.addClass("ui-focus");t.d.input.removeClass("ui-focus")}});t.d.input.removeClass("ui-corner-all ui-shadow-inset").bind(t.touch?"touchend":"click",function(e){if(t.disabled===false&&a.useNewStyle===true&&a.useFocus===false){if((t.touch?e.originalEvent.changedTouches[0].pageX:e.pageX)-e.target.offsetLeft>e.target.offsetWidth-20){t.d.input.trigger("datebox",{method:"open"});t.d.wrap.parent().addClass("ui-focus");t.d.input.removeClass("ui-focus")}}}).focus(function(){if(t.disabled===false&&a.useFocus===true){t.d.input.trigger("datebox",{method:"open"});t.d.wrap.addClass("ui-focus");t.d.input.removeClass("ui-focus");if(a.useNewStyle===false){t.d.input.parent().removeClass("ui-focus");t.d.wrap.parent().addClass("ui-focus")}}if(a.useNewStyle===false){t.d.input.removeClass("ui-focus")}}).blur(function(){t.d.wrap.removeClass("ui-focus");t.d.input.removeClass("ui-focus")}).change(function(){t.theDate=t._makeDate(t.d.input.val());t.refresh()}).attr("readonly",a.lockInput).on("datebox",t._event);if(a.useNewStyle===true){t.d.input.addClass("ui-corner-all "+(a.useAltIcon===true?"ui-icon-datebox-alt":"ui-icon-datebox"));if(a.overrideStyleClass!==false){t.d.input.addClass(a.overrideStyleClass)}}else{t.d.input.parent().css("border","none").removeClass("ui-shadow-inset")}t.d.wrap.parent().on(a.clickEvent,function(){if(!t.disabled&&a.useFocus===true&&a.useNewStyle===false){t.d.input.trigger("datebox",{method:"open"});t.d.wrap.addClass("ui-focus");t.d.input.removeClass("ui-focus");setTimeout(function(){t.d.wrap.removeClass("ui-focus");t.d.wrap.parent().addClass("ui-focus")},500)}});if(typeof e.event.special.mousewheel!=="undefined"){t.wheelExists=true}if(t.d.input.is(":disabled")){t.disable()}if(a.useInline===true||a.useInlineBlind){t.open()}t.applyMinMax(false,false);e(document).trigger("dateboxaftercreate")},applyMinMax:function(e,t){var a=this,i=this.options,n={};if(typeof e==="undefined"){e=false}if(typeof t==="undefined"){t=true}if((t===true||i.minDays===false)&&typeof a.d.input.attr("min")!=="undefined"){n.today=new a._date;n.lod=24*60*60*1e3;n.todayc=new a._date(n.today.getFullYear(),n.today.getMonth(),n.today.getDate(),0,0,0,0);n.fromel=a.d.input.attr("min").split("-");n.compdt=new a._date(n.fromel[0],n.fromel[1]-1,n.fromel[2],0,0,0,0);i.minDays=parseInt((n.compdt.getTime()-n.todayc.getTime())/n.lod*-1,10)}if((t===true||i.maxDays===false)&&typeof a.d.input.attr("max")!=="undefined"){n.today=new a._date;n.lod=24*60*60*1e3;n.todayc=new a._date(n.today.getFullYear(),n.today.getMonth(),n.today.getDate(),0,0,0,0);n.fromel=a.d.input.attr("max").split("-");n.compdt=new a._date(n.fromel[0],n.fromel[1]-1,n.fromel[2],0,0,0,0);i.maxDays=parseInt((n.compdt.getTime()-n.todayc.getTime())/n.lod,10)}if(e===true){a.refresh()}},_build:{"default":function(){this.d.headerText="Error";this.d.intHTML=e("<div class='ui-body-b'><h2 style='text-align:center'>There is no mode by that name loaded / mode not given</h2></div>")}},_applyCoords:function(t){var a=t.widget,i=t.widget.options,n={h:e.mobile.activePage.find(".ui-header").jqmData("position"),f:e.mobile.activePage.find(".ui-footer").jqmData("position"),fh:e.mobile.activePage.find(".ui-footer").outerHeight(),hh:e.mobile.activePage.find(".ui-header").outerHeight()},s={x:a.d.wrap.offset().left+a.d.wrap.outerWidth()/2,y:a.d.wrap.offset().top+a.d.wrap.outerHeight()/2},r={w:a.d.mainWrap.outerWidth(),h:a.d.mainWrap.outerHeight()},o={t:e(window).scrollTop(),h:e(window).height(),w:e.mobile.activePage.width(),ah:e(document).height()},d={y:i.centerVert?o.t+(o.h/2-r.h/2):s.y-r.h/2,x:o.w<400||i.centerHoriz?o.w/2-r.w/2:s.x-r.w/2};if(i.centerVert===false){if(i.hideFixedToolbars===true&&(typeof n.f!=="undefined"||typeof n.h!=="undefined")){e.mobile.activePage.find(":jqmData(position='fixed')").fixedtoolbar("hide");n.f=undefined;n.h=undefined}if(typeof n.f!=="undefined"){if(d.y+r.h>o.h-n.fh-2){d.y=o.h-n.fh-2-r.h}}else{if(d.y+r.h>o.ah-n.fh-2){d.y=o.ah-n.fh-2-r.h}if(o.h+o.t<r.h+d.y+2){d.y=o.h+o.t-r.h-2}}if(typeof n.h!=="undefined"){if(o.t+n.hh+2>d.y){d.y=o.t+n.hh+2}}else{if(n.hh+2>d.y){d.y=n.hh+2}if(d.y<o.t+2){d.y=o.t+2}}}a.d.mainWrap.css({position:"absolute",top:d.y,left:d.x})},_drag:{"default":function(){return false}},open:function(){var t=this,a=this.options,i={},n={history:false},s="data-"+this.ns,r=a.useAnimation?a.transition:"none";if(a.useFocus===true&&t.fastReopen===true){t.d.input.blur();return false}if(t.clearFunc!==false){clearTimeout(t.clearFunc);t.clearFunc=false}if(a.openCallback!==false){if(!e.isFunction(a.openCallback)){if(typeof window[a.openCallback]!=="undefined"){a.openCallback=window[a.openCallback]}else{a.openCallback=new Function(a.openCallback)}}if(a.openCallback.apply(t,e.merge([t.theDate],a.openCallbackArgs))===false){return false}}t.theDate=t._makeDate(t.d.input.val());if(t.d.input.val()===""){t._startOffset(t.theDate)}t.d.input.blur();if(typeof t._build[a.mode]==="undefined"){t._build["default"].apply(t,[])}else{t._build[a.mode].apply(t,[])}if(typeof t._drag[a.mode]!=="undefined"){t._drag[a.mode].apply(t,[])}t.d.input.trigger("datebox",{method:"refresh"});if(t.__("useArabicIndic")===true){t._doIndic()}if((a.useInline===true||a.useInlineBlind===true)&&t.initDone===false){t.d.mainWrap.append(t.d.intHTML);t.d.input.parent().parent().append(t.d.mainWrap);t.d.mainWrap.removeClass("ui-datebox-hidden");if(a.useInline===true){t.d.mainWrap.addClass("ui-datebox-inline")}else{t.d.mainWrap.addClass("ui-datebox-inlineblind");t.d.mainWrap.hide()}t.initDone=false;t.d.input.trigger("datebox",{method:"postrefresh"})}if(a.useImmediate){t.d.input.trigger("datebox",{method:"doset"})}if(a.useInline){return true}if(a.useInlineBlind){if(t.initDone){t.d.mainWrap.slideDown()}else{t.initDone=true}return true}if(t.d.intHTML.is(":visible")){return false}if(a.enablePopup===true){t.d.dialogPage=false;t.d.mainWrap.empty();if(a.useHeader===true){t.d.headHTML=e('<div class="ui-header ui-bar-'+a.themeHeader+'"></div>');e("<a class='ui-btn-left' href='#'>Close</a>").appendTo(t.d.headHTML).buttonMarkup({theme:a.themeHeader,icon:"delete",iconpos:"notext",corners:true,shadow:true}).on(a.clickEventAlt,function(e){e.preventDefault();t.d.input.trigger("datebox",{method:"close"})});e('<h1 class="ui-title">'+t.d.headerText+"</h1>").appendTo(t.d.headHTML);t.d.mainWrap.append(t.d.headHTML)}t.d.mainWrap.append(t.d.intHTML).css("zIndex",a.zindex);t.d.input.trigger("datebox",{method:"postrefresh"});if(a.useAnimation===true){i.transition=a.transition}else{i.transition="none"}if(a.popupForceX!==false&&a.popupForceY!==false){i.x=a.popupForceX;i.y=a.popupForceY}if(a.popupPosition!==false){i.positionTo=a.popupPosition}else{if(typeof t.baseID!==undefined){i.positionTo="#"+t.baseID}else{i.positionTo="window"}}if(a.useModal===true){n.overlayTheme="a"}t.d.mainWrap.removeClass("ui-datebox-hidden").popup(n).popup("open",i);t.refresh()}else{if(a.dialogForce||a.dialogEnable&&window.width()<400){t.d.dialogPage=e("<div "+s+"role='dialog' "+s+"theme='"+a.theme+"' >"+"<div "+s+"role='header' "+s+"theme='"+a.themeHeader+"'>"+"<h1>"+t.d.headerText+"</h1></div><div "+s+"role='content'></div>").appendTo(e.mobile.pageContainer).page().css("minHeight","0px").addClass(r);t.d.dialogPage.find(".ui-header").find("a").off("click vclick").on(a.clickEventAlt,function(e){e.preventDefault();t.d.input.trigger("datebox",{method:"close"})});t.d.mainWrap.append(t.d.intHTML).css({marginLeft:"auto",marginRight:"auto"}).removeClass("ui-datebox-hidden");t.d.dialogPage.find(".ui-content").append(t.d.mainWrap);t.d.input.trigger("datebox",{method:"postrefresh"});e.mobile.activePage.off("pagehide.remove");e.mobile.changePage(t.d.dialogPage,{transition:r})}else{t.d.dialogPage=false;t.d.mainWrap.empty();if(a.useHeader===true){t.d.headHTML=e('<div class="ui-header ui-bar-'+a.themeHeader+'"></div>');e("<a class='ui-btn-left' href='#'>Close</a>").appendTo(t.d.headHTML).buttonMarkup({theme:a.themeHeader,icon:"delete",iconpos:"notext",corners:true,shadow:true}).on(a.clickEventAlt,function(e){e.preventDefault();t.d.input.trigger("datebox",{method:"close"})});e('<h1 class="ui-title">'+t.d.headerText+"</h1>").appendTo(t.d.headHTML);t.d.mainWrap.append(t.d.headHTML)}t.d.mainWrap.append(t.d.intHTML).css("zIndex",a.zindex);t.d.mainWrap.appendTo(e.mobile.activePage);t.d.screen.appendTo(e.mobile.activePage);t.d.input.trigger("datebox",{method:"postrefresh"});t._applyCoords({widget:t});if(a.useModal===true){if(a.useAnimation){t.d.screen.fadeIn("slow")}else{t.d.screen.show()}}else{setTimeout(function(){t.d.screen.removeClass("ui-datebox-hidden")},500)}t.d.mainWrap.addClass("ui-overlay-shadow in").removeClass("ui-datebox-hidden");e(document).on("orientationchange.datebox",{widget:t},function(e){t._applyCoords(e.data)});if(a.resizeListener===true){e(window).on("resize.datebox",{widget:t},function(e){t._applyCoords(e.data)})}}}},close:function(){var t=this,a=this.options;if(a.useInlineBlind===true){t.d.mainWrap.slideUp();return true}if(a.useInline===true||t.d.intHTML===false){return true}if(t.d.dialogPage!==false){e(t.d.dialogPage).dialog("close");if(!e.mobile.activePage.jqmData("mobile-page").options.domCache){e.mobile.activePage.on("pagehide.remove",function(){e(this).remove()})}t.d.intHTML.detach().empty();t.d.mainWrap.detach().empty();t.d.wrap.removeClass("ui-focus");t.clearFunc=setTimeout(function(){t.d.dialogPage.empty().remove();t.clearFunc=false},1500)}else{if(a.enablePopup===true){t.d.mainWrap.popup("close");t.d.wrap.removeClass("ui-focus")}else{if(a.useModal){if(a.useAnimation){t.d.screen.fadeOut("slow")}else{t.d.screen.hide()}}else{t.d.screen.addClass("ui-datebox-hidden")}t.d.screen.detach();t.d.mainWrap.addClass("ui-datebox-hidden").removeAttr("style").removeClass("in ui-overlay-shadow").empty().detach();t.d.intHTML.detach();t.d.wrap.removeClass("ui-focus");e(document).off("orientationchange.datebox");if(a.resizeListener===true){e(window).off("resize.datebox")}}}t.d.wrap.parent().removeClass("ui-focus");e(document).off(t.drag.eMove);e(document).off(t.drag.eEnd);e(document).off(t.drag.eEndA);if(a.useFocus){t.fastReopen=true;setTimeout(function(e){return function(){e.fastReopen=false}}(t),300)}if(a.closeCallback!==false){if(!e.isFunction(a.closeCallback)){if(typeof window[a.closeCallback]!=="undefined"){a.closeCallback=window[a.closeCallback]}else{a.closeCallback=new Function(a.closeCallback)}}a.closeCallback.apply(t,e.merge([t.theDate],a.closeCallbackArgs))}},refresh:function(){if(typeof this._build[this.options.mode]==="undefined"){this._build["default"].apply(this,[])}else{this._build[this.options.mode].apply(this,[])}if(this.__("useArabicIndic")===true){this._doIndic()}this.d.mainWrap.append(this.d.intHTML);this.d.input.trigger("datebox",{method:"postrefresh"})},_check:function(){var t=this,a=null,n=this.options;t.dateOK=true;if(n.afterToday!==false){a=new t._date;if(t.theDate<a){t.theDate=a}}if(n.beforeToday!==false){a=new t._date;if(t.theDate>a){t.theDate=a}}if(n.maxDays!==false){a=new t._date;a.adj(2,n.maxDays);if(t.theDate>a){t.theDate=a}}if(n.minDays!==false){a=new t._date;a.adj(2,-1*n.minDays);if(t.theDate<a){t.theDate=a}}if(n.minHour!==false){if(t.theDate.getHours()<n.minHour){t.theDate.setHours(n.minHour)}}if(n.maxHour!==false){if(t.theDate.getHours()>n.maxHour){t.theDate.setHours(n.maxHour)}}if(n.maxYear!==false){a=new t._date(n.maxYear,0,1);a.adj(2,-1);if(t.theDate>a){t.theDate=a}}if(n.minYear!==false){a=new t._date(n.minYear,0,1);if(t.theDate<a){t.theDate=a}}if(e.inArray(n.mode,["timebox","durationbox","durationflipbox","timeflipbox"])>-1){if(n.mode==="timeflipbox"&&n.validHours!==false){if(e.inArray(t.theDate.getHours(),n.validHours)<0){t.dateOK=false}}}else{if(n.blackDatesRec!==false){for(i=0;i<n.blackDatesRec.length;i++){if((n.blackDatesRec[i][0]===-1||n.blackDatesRec[i][0]===year)&&(n.blackDatesRec[i][1]===-1||n.blackDatesRec[i][1]===month)&&(n.blackDatesRec[i][2]===-1||n.blackDatesRec[i][2]===date)){t.dateOK=false}}}if(n.blackDates!==false){if(e.inArray(t.theDate.iso(),n.blackDates)>-1){t.dateOK=false}}if(n.blackDays!==false){if(e.inArray(t.theDate.getDay(),n.blackDays)>-1){t.dateOK=false}}}},_grabLabel:function(){var e=this,t=this.options;if(typeof t.overrideDialogLabel==="undefined"){if(typeof e.d.input.attr("placeholder")!=="undefined"){return e.d.input.attr("placeholder")}if(typeof e.d.input.attr("title")!=="undefined"){return e.d.input.attr("title")}if(e.d.wrap.parent().find("label[for='"+e.d.input.attr("id")+"']").text()!==""){return e.d.wrap.parent().find("label[for='"+e.d.input.attr("id")+"']").text()}return false}return t.overrideDialogLabel},_makeEl:function(e,t){var a=false,i=false;i=e.clone();if(typeof t.attr!=="undefined"){for(a in t.attr){if(t.attr.hasOwnProperty(a)){i.jqmData(a,t.attr[a])
}}}return i},_getLongOptions:function(t){var a,i={},n,s;if(e.mobile.ns===""){n="datebox"}else{n=e.mobile.ns.substr(0,e.mobile.ns.length-1)+"Datebox"}for(a in t.data()){if(a.substr(0,n.length)===n&&a.length>n.length){s=a.substr(n.length);s=s.charAt(0).toLowerCase()+s.slice(1);i[s]=t.data(a)}}return i},disable:function(){this.d.input.attr("disabled",true);this.d.wrap.addClass("ui-disabled").blur();this.disabled=true;this.d.input.trigger("datebox",{method:"disable"})},enable:function(){this.d.input.attr("disabled",false);this.d.wrap.removeClass("ui-disabled");this.disabled=false;this.d.input.trigger("datebox",{method:"enable"})},_setOption:function(){e.Widget.prototype._setOption.apply(this,arguments);this.refresh()},getTheDate:function(){return this.theDate},getLastDur:function(){return this.lastDuration},setTheDate:function(e){this.theDate=e;this.refresh()},callFormat:function(e,t){return this._formatter(e,t)}});e(document).on("pagebeforecreate",function(t){e(":jqmData(role='datebox')",t.target).each(function(){e(this).prop("type","text")})});e(document).on("pagecreate create",function(t){e(document).trigger("dateboxbeforecreate");e(":jqmData(role='datebox')",t.target).each(function(){var t=typeof e(this).data(parseInt(e.mobile.version.replace(/\./g,""),10)>111?"mobile-datebox":"datebox");if(t==="undefined"){e(this).datebox()}})})})(jQuery);(function(e){e.extend(e.mobile.datebox.prototype.options,{themeDateToday:"b",themeDayHigh:"b",themeDatePick:"b",themeDateHigh:"b",themeDateHighAlt:"b",themeDateHighRec:"b",themeDate:"a",calHighToday:true,calHighPick:true,calShowDays:true,calOnlyMonth:false,calWeekMode:false,calWeekModeDay:1,calWeekHigh:false,calControlGroup:false,calShowWeek:false,calUsePickers:false,calNoHeader:false,useTodayButton:false,useCollapsedBut:false,highDays:false,highDates:false,highDatesRec:false,highDatesAlt:false,enableDates:false,calDateList:false,calShowDateList:false});e.extend(e.mobile.datebox.prototype,{_cal_gen:function(e,t,a,i,n){var s=0,r=0,o=1,d=1,l=[],u=[],f=false;for(s=0;s<=5;s++){if(f===false){u=[];for(r=0;r<=6;r++){if(s===0&&r<e){if(i===true){u.push([t+(r-e)+1,n-1])}else{u.push(false)}}else if(s>3&&o>a){if(i===true){u.push([d,n+1]);d++}else{u.push(false)}f=true}else{u.push([o,n]);o++;if(o>a){f=true}}}l.push(u)}}return l},_cal_check:function(t,a,i,n){var s=this,r,o=this.options,d={},l=new this._date(a,i,n,0,0,0,0).getDay();d.ok=true;d.iso=a+"-"+s._zPad(i+1)+"-"+s._zPad(n);d.comp=parseInt(d.iso.replace(/-/g,""),10);d.theme=o.themeDate;d.recok=true;d.rectheme=false;if(o.blackDatesRec!==false){for(r=0;r<o.blackDatesRec.length;r++){if((o.blackDatesRec[r][0]===-1||o.blackDatesRec[r][0]===a)&&(o.blackDatesRec[r][1]===-1||o.blackDatesRec[r][1]===i)&&(o.blackDatesRec[r][2]===-1||o.blackDatesRec[r][2]===n)){d.recok=false}}}if(e.isArray(o.enableDates)&&e.inArray(d.iso,o.enableDates)<0){d.ok=false}else if(t.checkDates){if(d.recok!==true||o.afterToday===true&&t.thisDate.comp()>d.comp||o.beforeToday===true&&t.thisDate.comp()<d.comp||o.notToday===true&&t.thisDate.comp()===d.comp||o.maxDays!==false&&t.maxDate.comp()<d.comp||o.minDays!==false&&t.minDate.comp()>d.comp||e.isArray(o.blackDays)&&e.inArray(l,o.blackDays)>-1||e.isArray(o.blackDates)&&e.inArray(d.iso,o.blackDates)>-1){d.ok=false}}if(d.ok){if(o.highDatesRec!==false){for(r=0;r<o.highDatesRec.length;r++){if((o.highDatesRec[r][0]===-1||o.highDatesRec[r][0]===a)&&(o.highDatesRec[r][1]===-1||o.highDatesRec[r][1]===i)&&(o.highDatesRec[r][2]===-1||o.highDatesRec[r][2]===n)){d.rectheme=true}}}if(o.calHighPick&&n===t.presetDay&&s.d.input.val()!==""|o.defaultValue!==false){d.theme=o.themeDatePick}else if(o.calHighToday&&d.comp===t.thisDate.comp()){d.theme=o.themeDateToday}else if(e.isArray(o.highDatesAlt)&&e.inArray(d.iso,o.highDatesAlt)>-1){d.theme=o.themeDateHighAlt}else if(e.isArray(o.highDates)&&e.inArray(d.iso,o.highDates)>-1){d.theme=o.themeDateHigh}else if(e.isArray(o.highDays)&&e.inArray(l,o.highDays)>-1){d.theme=o.themeDayHigh}else if(e.isArray(o.highDatesRec)&&d.rectheme===true){d.theme=o.themeDateHighRec}}return d}});e.extend(e.mobile.datebox.prototype._build,{calbox:function(){var t=this,a=this.options,i,n=false,s="ui-datebox-",r=false,o=false,d=false,l=false,u=false;if(typeof t.d.intHTML!=="boolean"){t.d.intHTML.remove()}t.d.headerText=t._grabLabel()!==false?t._grabLabel():t.__("titleDateDialogLabel");t.d.intHTML=e("<span>");e('<div class="'+s+'gridheader"><div class="'+s+'gridlabel"><h4>'+t._formatter(t.__("calHeaderFormat"),t.theDate)+"</h4></div></div>").appendTo(t.d.intHTML);e("<div class='"+s+"gridplus"+(t.__("isRTL")?"-rtl":"")+"'><a href='#'>"+t.__("nextMonth")+"</a></div>").prependTo(t.d.intHTML.find("."+s+"gridheader")).buttonMarkup({theme:a.themeDate,icon:"arrow-r",inline:true,iconpos:"notext",corners:true,shadow:true}).on(a.clickEventAlt,function(e){e.preventDefault();if(t.calNext){if(t.theDate.getDate()>28){t.theDate.setDate(1)}t._offset("m",1)}});e("<div class='"+s+"gridminus"+(t.__("isRTL")?"-rtl":"")+"'><a href='#'>"+t.__("prevMonth")+"</a></div>").prependTo(t.d.intHTML.find("."+s+"gridheader")).buttonMarkup({theme:a.themeDate,icon:"arrow-l",inline:true,iconpos:"notext",corners:true,shadow:true}).on(a.clickEventAlt,function(e){e.preventDefault();if(t.calPrev){if(t.theDate.getDate()>28){t.theDate.setDate(1)}t._offset("m",-1)}});if(a.calNoHeader===true){t.d.intHTML.find("."+s+"gridheader").remove()}n={today:-1,highlightDay:-1,presetDay:-1,startDay:t.__("calStartDay"),thisDate:new t._date,maxDate:t.initDate.copy(),minDate:t.initDate.copy(),currentMonth:false,weekMode:0,weekDays:null};n.start=(t.theDate.copy([0],[0,0,1]).getDay()-t.__("calStartDay")+7)%7;n.thisMonth=t.theDate.getMonth();n.thisYear=t.theDate.getFullYear();n.wk=t.theDate.copy([0],[0,0,1]).adj(2,-1*n.start+(t.__("calStartDay")===0?1:0)).getDWeek(4);n.end=32-t.theDate.copy([0],[0,0,32,13]).getDate();n.lastend=32-t.theDate.copy([0,-1],[0,0,32,13]).getDate();n.presetDate=t.d.input.val()===""?t._startOffset(t._makeDate(t.d.input.val())):t._makeDate(t.d.input.val());n.thisDateArr=n.thisDate.getArray();n.theDateArr=t.theDate.getArray();n.checkDates=e.inArray(false,[a.afterToday,a.beforeToday,a.notToday,a.maxDays,a.minDays,a.blackDates,a.blackDays])>-1;t.calNext=true;t.calPrev=true;if(n.thisDateArr[0]===n.theDateArr[0]&&n.thisDateArr[1]===n.theDateArr[1]){n.currentMonth=true}if(n.presetDate.comp()===t.theDate.comp()){n.presetDay=n.presetDate.getDate()}if(a.afterToday===true&&(n.currentMonth===true||n.thisDateArr[1]>=n.theDateArr[1]&&n.theDateArr[0]===n.thisDateArr[0])){t.calPrev=false}if(a.beforeToday===true&&(n.currentMonth===true||n.thisDateArr[1]<=n.theDateArr[1]&&n.theDateArr[0]===n.thisDateArr[0])){t.calNext=false}if(a.minDays!==false){n.minDate.adj(2,-1*a.minDays);if(n.theDateArr[0]===n.minDate.getFullYear()&&n.theDateArr[1]<=n.minDate.getMonth()){t.calPrev=false}}if(a.maxDays!==false){n.maxDate.adj(2,a.maxDays);if(n.theDateArr[0]===n.maxDate.getFullYear()&&n.theDateArr[1]>=n.maxDate.getMonth()){t.calNext=false}}if(a.calUsePickers===true){n.picker=e("<div>",{"class":"ui-grid-a ui-datebox-grid",style:"padding-top: 5px; padding-bottom: 5px;"});n.picker1=e('<div class="ui-block-a"><select name="pickmon"></select></div>').appendTo(n.picker).find("select");n.picker2=e('<div class="ui-block-b"><select name="pickyar"></select></div>').appendTo(n.picker).find("select");for(i=0;i<=11;i++){n.picker1.append(e('<option value="'+i+'"'+(n.thisMonth===i?' selected="selected"':"")+">"+t.__("monthsOfYear")[i]+"</option>"))}for(i=n.thisYear-6;i<=n.thisYear+6;i++){n.picker2.append(e('<option value="'+i+'"'+(n.thisYear===i?' selected="selected"':"")+">"+i+"</option>"))}n.picker1.on("change",function(){t.theDate.setMonth(e(this).val());t.refresh()});n.picker2.on("change",function(){t.theDate.setFullYear(e(this).val());t.refresh()});n.picker.find("select").selectmenu({mini:true,nativeMenu:true});n.picker.appendTo(t.d.intHTML)}r=e('<div class="'+s+'grid">').appendTo(t.d.intHTML);if(a.calShowDays){t._cal_days=t.__("daysOfWeekShort").concat(t.__("daysOfWeekShort"));n.weekDays=e("<div>",{"class":s+"gridrow"}).appendTo(r);if(t.__("isRTL")===true){n.weekDays.css("direction","rtl")}if(a.calShowWeek){e("<div>").addClass(s+"griddate "+s+"griddate-empty "+s+"griddate-label").appendTo(n.weekDays)}for(i=0;i<=6;i++){e("<div>"+t._cal_days[(i+n.startDay)%7]+"</div>").addClass(s+"griddate "+s+"griddate-empty "+s+"griddate-label").appendTo(n.weekDays)}}n.gen=t._cal_gen(n.start,n.lastend,n.end,!a.calOnlyMonth,t.theDate.getMonth());for(var o=0,f=n.gen.length;o<f;o++){l=e("<div>",{"class":s+"gridrow"});if(t.__("isRTL")){l.css("direction","rtl")}if(a.calShowWeek){e("<div>",{"class":s+"griddate "+s+"griddate-empty"}).text("W"+n.wk).appendTo(l);n.wk++;if(n.wk>52&&typeof n.gen[parseInt(o,10)+1]!=="undefined"){n.wk=new Date(n.theDateArr[0],n.theDateArr[1],t.__("calStartDay")===0?n.gen[parseInt(o,10)+1][1][0]:n.gen[parseInt(o,10)+1][0][0]).getDWeek(4)}}for(var d=0,c=n.gen[o].length;d<c;d++){if(a.calWeekMode){n.weekMode=n.gen[o][a.calWeekModeDay][0]}if(typeof n.gen[o][d]==="boolean"){e("<div>",{"class":s+"griddate "+s+"griddate-empty"}).appendTo(l)}else{u=t._cal_check(n,n.theDateArr[0],n.gen[o][d][1],n.gen[o][d][0]);if(n.gen[o][d][0]){e("<div>"+String(n.gen[o][d][0])+"</div>").addClass(n.thisMonth===n.gen[o][d][1]?s+"griddate ui-corner-all ui-btn ui-btn-"+(a.mobVer<140?"up-":"")+u.theme+(u.ok?"":" "+s+"griddate-disable"):s+"griddate "+s+"griddate-empty").jqmData("date",a.calWeekMode?n.weekMode:n.gen[o][d][0]).jqmData("theme",n.thisMonth===n.gen[o][d][1]?u.theme:"-").jqmData("enabled",u.ok).jqmData("month",n.gen[o][a.calWeekMode?a.calWeekModeDay:d][1]).appendTo(l)}}}if(a.calControlGroup===true){l.find(".ui-corner-all").removeClass("ui-corner-all").eq(0).addClass("ui-corner-left").end().last().addClass("ui-corner-right").addClass("ui-controlgroup-last")}l.appendTo(r)}if(a.calShowWeek){r.find("."+s+"griddate").addClass(s+"griddate-week")}if(a.calShowDateList===true&&a.calDateList!==false){n.datelist=e("<div>");n.datelistpick=e('<select name="pickdate"></select>').appendTo(n.datelist);n.datelistpick.append('<option value="false" selected="selected">'+t.__("calDateListLabel")+"</option>");for(i=0;i<a.calDateList.length;i++){n.datelistpick.append(e('<option value="'+a.calDateList[i][0]+'">'+a.calDateList[i][1]+"</option>"))}n.datelistpick.on("change",function(){n.datelistdate=e(this).val().split("-");t.theDate=new t._date(n.datelistdate[0],n.datelistdate[1]-1,n.datelistdate[2],0,0,0,0);t.d.input.trigger("datebox",{method:"doset"})});n.datelist.find("select").selectmenu({mini:true,nativeMenu:true});n.datelist.appendTo(t.d.intHTML)}if(a.useTodayButton||a.useClearButton){l=e("<div>",{"class":s+"controls"});if(a.useTodayButton){e('<a href="#">'+t.__("calTodayButtonLabel")+"</a>").appendTo(l).buttonMarkup({theme:a.theme,icon:"check",iconpos:"left",corners:true,shadow:true}).on(a.clickEvent,function(e){e.preventDefault();t.theDate=new t._date;t.theDate=new t._date(t.theDate.getFullYear(),t.theDate.getMonth(),t.theDate.getDate(),0,0,0,0);t.d.input.trigger("datebox",{method:"doset"})})}if(a.useClearButton){e('<a href="#">'+t.__("clearButton")+"</a>").appendTo(l).buttonMarkup({theme:a.theme,icon:"delete",iconpos:"left",corners:true,shadow:true}).on(a.clickEventAlt,function(e){e.preventDefault();t.d.input.val("");t.d.input.trigger("datebox",{method:"clear"});t.d.input.trigger("datebox",{method:"close"})})}if(a.useCollapsedBut){l.addClass("ui-datebox-collapse")}l.appendTo(r)}t.d.intHTML.on(a.clickEventAlt+" vmouseover vmouseout","div."+s+"griddate",function(i){if(i.type===a.clickEventAlt){i.preventDefault();if(e(this).jqmData("enabled")){t.theDate.setD(2,1).setD(1,e(this).jqmData("month")).setD(2,e(this).jqmData("date"));t.d.input.trigger("datebox",{method:"set",value:t._formatter(t.__fmt(),t.theDate),date:t.theDate});t.d.input.trigger("datebox",{method:"close"})}}else{if(e(this).jqmData("enabled")&&typeof e(this).jqmData("theme")!=="undefined"&&a.mobVer<140){if(a.calWeekMode!==false&&a.calWeekHigh===true){e(this).parent().find("div").each(function(){t._hoover(this)})}else{t._hoover(this)}}}});t.d.intHTML.on("swipeleft",function(){if(t.calNext){t._offset("m",1)}}).on("swiperight",function(){if(t.calPrev){t._offset("m",-1)}});if(t.wheelExists){t.d.intHTML.on("mousewheel",function(e,a){e.preventDefault();if(a>0&&t.calNext){t.theDate.setD(2,1);t._offset("m",1)}if(a<0&&t.calPrev){t.theDate.setD(2,1);t._offset("m",-1)}})}}})})(jQuery);(function(e){e.extend(e.mobile.datebox.prototype.options,{themeDateHigh:"b",themeDatePick:"b",themeDate:"a",useSetButton:true,validHours:false,flen:{y:15,m:12,d:15,h:12,i:15,a:3}});e.extend(e.mobile.datebox.prototype,{_fbox_pos:function(){var t=this,a=null,i=null,n=this.d.intHTML.find(".ui-datebox-flipcontent").innerHeight(),s=null;t.d.intHTML.find(".ui-datebox-flipcenter").each(function(){a=e(this);i=a.innerHeight();a.css("top",(n/2-i/2+4)*-1)});t.d.intHTML.find("ul").each(function(){a=e(this);n=a.parent().innerHeight();i=a.find("li").first();s=a.find("li").size()*i.outerHeight();i.css("marginTop",(s/2-n/2+i.outerHeight()/2)*-1)})}});e.extend(e.mobile.datebox.prototype._build,{timeflipbox:function(){this._build.flipbox.apply(this)},flipbox:function(){var t=this,a=this.options,i,n,s,r,o,d=t.d.input.val()===""?t._startOffset(t._makeDate(t.d.input.val())):t._makeDate(t.d.input.val()),l="ui-datebox-",u=e("<div class='ui-overlay-shadow'><ul></ul></div>"),f=e("<div>",{"class":l+"flipcontent"});if(typeof t.d.intHTML!=="boolean"){t.d.intHTML.empty()}t.d.input.on("datebox",function(e,a){if(a.method==="postrefresh"){t._fbox_pos()}});t.d.headerText=t._grabLabel()!==false?t._grabLabel():a.mode==="flipbox"?t.__("titleDateDialogLabel"):t.__("titleTimeDialogLabel");t.d.intHTML=e("<span>");t.fldOrder=a.mode==="flipbox"?t.__("dateFieldOrder"):t.__("timeFieldOrder");t._check();t._minStepFix();if(a.mode==="flipbox"){e('<div class="'+l+'header"><h4>'+t._formatter(t.__("headerFormat"),t.theDate)+"</h4></div>").appendTo(t.d.intHTML)}t.d.intHTML.append(f);for(n=0;n<t.fldOrder.length;n++){switch(t.fldOrder[n]){case"y":s=t._makeEl(u,{attr:{field:"y",amount:1}});for(i=a.flen.y*-1;i<a.flen.y+1;i++){r=i!==0?d.get(0)===t.theDate.get(0)+i?a.themeDateHigh:a.themeDate:a.themeDatePick;e("<li>",{"class":"ui-body-"+r}).html("<span>"+(t.theDate.get(0)+i)+"</span>").appendTo(s.find("ul"))}s.appendTo(f);break;case"m":s=t._makeEl(u,{attr:{field:"m",amount:1}});for(i=a.flen.m*-1;i<a.flen.m+1;i++){o=t.theDate.copy([0],[0,0,1]);o.adj(1,i);r=i!==0?d.get(1)===o.get(1)&&d.get(0)===o.get(0)?a.themeDateHigh:a.themeDate:a.themeDatePick;e("<li>",{"class":"ui-body-"+r}).html("<span>"+t.__("monthsOfYearShort")[o.getMonth()]+"</span>").appendTo(s.find("ul"))}s.appendTo(f);break;case"d":s=t._makeEl(u,{attr:{field:"d",amount:1}});for(i=a.flen.d*-1;i<a.flen.d+1;i++){o=t.theDate.copy();o.adj(2,i);r=i!==0?d.comp()===o.comp()?a.themeDateHigh:a.themeDate:a.themeDatePick;if(a.blackDates!==false&&e.inArray(o.iso(),a.blackDates)>-1||a.blackDays!==false&&e.inArray(o.getDay(),a.blackDays)>-1){r+=" "+l+"griddate-disable"}e("<li>",{"class":"ui-body-"+r}).html("<span>"+o.getDate()+"</span>").appendTo(s.find("ul"))}s.appendTo(f);break;case"h":s=t._makeEl(u,{attr:{field:"h",amount:1}});for(i=a.flen.h*-1;i<a.flen.h+1;i++){o=t.theDate.copy();o.adj(3,i);r=i!==0?a.themeDate:a.themeDatePick;if(a.validHours!==false&&e.inArray(o.get(3),a.validHours)<0){r+=" "+l+"griddate-disable"}e("<li>",{"class":"ui-body-"+r}).html("<span>"+(t.__("timeFormat")===12?o.get(3)===0?"12":o.get(3)<13?o.get(3):o.get(3)-12:o.get(3))+"</span>").appendTo(s.find("ul"))}s.appendTo(f);break;case"i":s=t._makeEl(u,{attr:{field:"i",amount:a.minuteStep}});for(i=a.flen.i*-1;i<a.flen.i+1;i++){o=t.theDate.copy();o.adj(4,i*a.minuteStep);r=i!==0?a.themeDate:a.themeDatePick;e("<li>",{"class":"ui-body-"+r}).html("<span>"+t._zPad(o.get(4))+"</span>").appendTo(s.find("ul"))}s.appendTo(f);break;case"a":if(t.__("timeFormat")!==12){break}s=t._makeEl(u,{attr:{field:"a",amount:1}});o=e("<li class='ui-body-"+a.themeDate+"'><span> </span></li>");for(i=0;i<a.flen.a;i++){o.clone().appendTo(s.find("ul"))}if(t.theDate.get(3)<12){o.clone().appendTo(s.find("ul"))}r=t.theDate.get(3)>11?[a.themeDate,a.themeDatePick]:[a.themeDatePick,a.themeDate];e("<li>",{"class":"ui-body-"+r[0]}).html("<span>"+t.__("meridiem")[0]+"</span>").appendTo(s.find("ul"));e("<li>",{"class":"ui-body-"+r[1]}).html("<span>"+t.__("meridiem")[1]+"</span>").appendTo(s.find("ul"));if(t.theDate.get(3)>11){o.clone().appendTo(s.find("ul"))}for(i=0;i<a.flen.a;i++){o.clone().appendTo(s.find("ul"))}s.appendTo(f);break}}e("<div>",{"class":l+"flipcenter ui-overlay-shadow"}).css("pointerEvents","none").appendTo(t.d.intHTML);if(a.useSetButton||a.useClearButton){n=e("<div>",{"class":l+"controls"});if(a.useSetButton){e('<a href="#">'+(a.mode==="flipbox"?t.__("setDateButtonLabel"):t.__("setTimeButtonLabel"))+"</a>").appendTo(n).buttonMarkup({theme:a.theme,icon:"check",iconpos:"left",corners:true,shadow:true}).on(a.clickEventAlt,function(e){e.preventDefault();if(t.dateOK===true){t.d.input.trigger("datebox",{method:"set",value:t._formatter(t.__fmt(),t.theDate),date:t.theDate});t.d.input.trigger("datebox",{method:"close"})}})}if(a.useClearButton){e('<a href="#">'+t.__("clearButton")+"</a>").appendTo(n).buttonMarkup({theme:a.theme,icon:"delete",iconpos:"left",corners:true,shadow:true}).on(a.clickEventAlt,function(e){e.preventDefault();t.d.input.val("");t.d.input.trigger("datebox",{method:"clear"});t.d.input.trigger("datebox",{method:"close"})})}if(a.useCollapsedBut){n.addClass("ui-datebox-collapse")}n.appendTo(t.d.intHTML)}if(t.wheelExists){t.d.intHTML.on("mousewheel",".ui-overlay-shadow",function(a,i){a.preventDefault();t._offset(e(this).jqmData("field"),(i<0?-1:1)*e(this).jqmData("amount"))})}t.d.intHTML.on(t.drag.eStart,"ul",function(a,i){if(!t.drag.move){if(typeof i!=="undefined"){a=i}t.drag.move=true;t.drag.target=e(this).find("li").first();t.drag.pos=parseInt(t.drag.target.css("marginTop").replace(/px/i,""),10);t.drag.start=t.touch?a.originalEvent.changedTouches[0].pageY:a.pageY;t.drag.end=false;a.stopPropagation();a.preventDefault()}});t.d.intHTML.on(t.drag.eStart,"."+l+"flipcenter",function(a){if(!t.drag.move){t.drag.target=t.touch?a.originalEvent.changedTouches[0].pageX-e(a.currentTarget).offset().left:a.pageX-e(a.currentTarget).offset().left;t.drag.tmp=t.d.intHTML.find("."+l+"flipcenter").innerWidth()/(e.inArray("a",t.fldOrder)>-1&&t.__("timeFormat")!==12?t.fldOrder.length-1:t.fldOrder.length);e(t.d.intHTML.find("ul").get(parseInt(t.drag.target/t.drag.tmp,10))).trigger(t.drag.eStart,a)}})}});e.extend(e.mobile.datebox.prototype._drag,{timeflipbox:function(){this._drag.flipbox.apply(this)},flipbox:function(){var t=this,a=this.options,i=this.drag;e(document).on(i.eMove,function(e){if(i.move&&(a.mode==="flipbox"||a.mode==="timeflipbox")){i.end=t.touch?e.originalEvent.changedTouches[0].pageY:e.pageY;i.target.css("marginTop",i.pos+i.end-i.start+"px");e.preventDefault();e.stopPropagation();return false}});e(document).on(i.eEnd,function(e){if(i.move&&(a.mode==="flipbox"||a.mode==="timeflipbox")){i.move=false;if(i.end!==false){e.preventDefault();e.stopPropagation();i.tmp=i.target.parent().parent();t._offset(i.tmp.jqmData("field"),parseInt((i.start-i.end)/i.target.innerHeight(),10)*i.tmp.jqmData("amount"))}i.start=false;i.end=false}})}})})(jQuery);jQuery.extend(jQuery.mobile.datebox.prototype.options.lang,{"zh-TW":{setDateButtonLabel:"設定日期",setTimeButtonLabel:"設定時間",setDurationButtonLabel:"設定持續日期",calTodayButtonLabel:"選擇今天日期",titleDateDialogLabel:"選擇日期",titleTimeDialogLabel:"選擇時間",daysOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysOfWeekShort:["日","一","二","三","四","五","六"],monthsOfYear:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsOfYearShort:["一","二","三","四","五","六","七","八","九","十","十一","十二"],durationLabel:["天","小時","分鐘","秒"],durationDays:["天","天"],tooltip:"開啟日期選擇",nextMonth:"下個月",prevMonth:"上個月",timeFormat:24,headerFormat:"%A, %B %-d, %Y",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",useArabicIndic:false,isRTL:false,calStartDay:0,clearButton:"清除",durationOrder:["d","h","i","s"],meridiem:["上午","下午"],timeOutput:"%k:%M",durationFormat:"%Dd %DA, %Dl:%DM:%DS",calDateListLabel:"其他日期",calHeaderFormat:"%B %Y"}});jQuery.extend(jQuery.mobile.datebox.prototype.options,{useLang:"zh-TW"});