var io="undefined"===typeof module?{}:module.exports;(function(){(function(t,e){var n=t;n.version="0.9.16";n.protocol=1;n.transports=[];n.j=[];n.sockets={};n.connect=function(t,o){var i=n.util.parseUri(t),r,s;if(e&&e.location){i.protocol=i.protocol||e.location.protocol.slice(0,-1);i.host=i.host||(e.document?e.document.domain:e.location.hostname);i.port=i.port||e.location.port}r=n.util.uniqueUri(i);var a={host:i.host,secure:"https"==i.protocol,port:i.port||("https"==i.protocol?443:80),query:i.query||""};n.util.merge(a,o);if(a["force new connection"]||!n.sockets[r]){s=new n.Socket(a)}if(!a["force new connection"]&&s){n.sockets[r]=s}s=s||n.sockets[r];return s.of(i.path.length>1?i.path:"")}})("object"===typeof module?module.exports:this.io={},this);(function(t,e){var n=t.util={};var o=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(t){var e=o.exec(t||""),n={},r=14;while(r--){n[i[r]]=e[r]||""}return n};n.uniqueUri=function(t){var n=t.protocol,o=t.host,i=t.port;if("document"in e){o=o||document.domain;i=i||(n=="https"&&document.location.protocol!=="https:"?443:document.location.port)}else{o=o||"localhost";if(!i&&n=="https"){i=443}}return(n||"http")+"://"+o+":"+(i||80)};n.query=function(t,e){var o=n.chunkQuery(t||""),i=[];n.merge(o,n.chunkQuery(e||""));for(var r in o){if(o.hasOwnProperty(r)){i.push(r+"="+o[r])}}return i.length?"?"+i.join("&"):""};n.chunkQuery=function(t){var e={},n=t.split("&"),o=0,i=n.length,r;for(;o<i;++o){r=n[o].split("=");if(r[0]){e[r[0]]=r[1]}}return e};var r=false;n.load=function(t){if("document"in e&&document.readyState==="complete"||r){return t()}n.on(e,"load",t,false)};n.on=function(t,e,n,o){if(t.attachEvent){t.attachEvent("on"+e,n)}else if(t.addEventListener){t.addEventListener(e,n,o)}};n.request=function(t){if(t&&"undefined"!=typeof XDomainRequest&&!n.ua.hasCORS){return new XDomainRequest}if("undefined"!=typeof XMLHttpRequest&&(!t||n.ua.hasCORS)){return new XMLHttpRequest}if(!t){try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}return null};if("undefined"!=typeof window){n.load(function(){r=true})}n.defer=function(t){if(!n.ua.webkit||"undefined"!=typeof importScripts){return t()}n.load(function(){setTimeout(t,100)})};n.merge=function s(t,e,o,i){var r=i||[],s=typeof o=="undefined"?2:o,a;for(a in e){if(e.hasOwnProperty(a)&&n.indexOf(r,a)<0){if(typeof t[a]!=="object"||!s){t[a]=e[a];r.push(e[a])}else{n.merge(t[a],e[a],s-1,r)}}}return t};n.mixin=function(t,e){n.merge(t.prototype,e.prototype)};n.inherit=function(t,e){function n(){}n.prototype=e.prototype;t.prototype=new n};n.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};n.intersect=function(t,e){var o=[],i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(var s=0,a=r.length;s<a;s++){if(~n.indexOf(i,r[s]))o.push(r[s])}return o};n.indexOf=function(t,e,n){for(var o=t.length,n=n<0?n+o<0?0:n+o:n||0;n<o&&t[n]!==e;n++){}return o<=n?-1:n};n.toArray=function(t){var e=[];for(var n=0,o=t.length;n<o;n++)e.push(t[n]);return e};n.ua={};n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var t=new XMLHttpRequest}catch(e){return false}return t.withCredentials!=undefined}();n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)})("undefined"!=typeof io?io:module.exports,this);(function(t,e){t.EventEmitter=n;function n(){}n.prototype.on=function(t,n){if(!this.$events){this.$events={}}if(!this.$events[t]){this.$events[t]=n}else if(e.util.isArray(this.$events[t])){this.$events[t].push(n)}else{this.$events[t]=[this.$events[t],n]}return this};n.prototype.addListener=n.prototype.on;n.prototype.once=function(t,e){var n=this;function o(){n.removeListener(t,o);e.apply(this,arguments)}o.listener=e;this.on(t,o);return this};n.prototype.removeListener=function(t,n){if(this.$events&&this.$events[t]){var o=this.$events[t];if(e.util.isArray(o)){var i=-1;for(var r=0,s=o.length;r<s;r++){if(o[r]===n||o[r].listener&&o[r].listener===n){i=r;break}}if(i<0){return this}o.splice(i,1);if(!o.length){delete this.$events[t]}}else if(o===n||o.listener&&o.listener===n){delete this.$events[t]}}return this};n.prototype.removeAllListeners=function(t){if(t===undefined){this.$events={};return this}if(this.$events&&this.$events[t]){this.$events[t]=null}return this};n.prototype.listeners=function(t){if(!this.$events){this.$events={}}if(!this.$events[t]){this.$events[t]=[]}if(!e.util.isArray(this.$events[t])){this.$events[t]=[this.$events[t]]}return this.$events[t]};n.prototype.emit=function(t){if(!this.$events){return false}var n=this.$events[t];if(!n){return false}var o=Array.prototype.slice.call(arguments,1);if("function"==typeof n){n.apply(this,o)}else if(e.util.isArray(n)){var i=n.slice();for(var r=0,s=i.length;r<s;r++){i[r].apply(this,o)}}else{return false}return true}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,nativeJSON){"use strict";if(nativeJSON&&nativeJSON.parse){return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify}}var JSON=exports.JSON={};function f(t){return t<10?"0"+t:t}function date(t,e){return isFinite(t.valueOf())?t.getUTCFullYear()+"-"+f(t.getUTCMonth()+1)+"-"+f(t.getUTCDate())+"T"+f(t.getUTCHours())+":"+f(t.getUTCMinutes())+":"+f(t.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){escapable.lastIndex=0;return escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return typeof e==="string"?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,o,i,r,s=gap,a,c=e[t];if(c instanceof Date){c=date(t)}if(typeof rep==="function"){c=rep.call(e,t,c)}switch(typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c){return"null"}gap+=indent;a=[];if(Object.prototype.toString.apply(c)==="[object Array]"){r=c.length;for(n=0;n<r;n+=1){a[n]=str(n,c)||"null"}i=a.length===0?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]";gap=s;return i}if(rep&&typeof rep==="object"){r=rep.length;for(n=0;n<r;n+=1){if(typeof rep[n]==="string"){o=rep[n];i=str(o,c);if(i){a.push(quote(o)+(gap?": ":":")+i)}}}}else{for(o in c){if(Object.prototype.hasOwnProperty.call(c,o)){i=str(o,c);if(i){a.push(quote(o)+(gap?": ":":")+i)}}}}i=a.length===0?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}";gap=s;return i}}JSON.stringify=function(t,e,n){var o;gap="";indent="";if(typeof n==="number"){for(o=0;o<n;o+=1){indent+=" "}}else if(typeof n==="string"){indent=n}rep=e;if(e&&typeof e!=="function"&&(typeof e!=="object"||typeof e.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":t})};JSON.parse=function(text,reviver){var j;function walk(t,e){var n,o,i=t[e];if(i&&typeof i==="object"){for(n in i){if(Object.prototype.hasOwnProperty.call(i,n)){o=walk(i,n);if(o!==undefined){i[n]=o}else{delete i[n]}}}}return reviver.call(t,e,i)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}})("undefined"!=typeof io?io:module.exports,typeof JSON!=="undefined"?JSON:undefined);(function(t,e){var n=t.parser={};var o=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"];var i=n.reasons=["transport not supported","client not handshaken","unauthorized"];var r=n.advice=["reconnect"];var s=e.JSON,a=e.util.indexOf;n.encodePacket=function(t){var e=a(o,t.type),n=t.id||"",c=t.endpoint||"",p=t.ack,u=null;switch(t.type){case"error":var f=t.reason?a(i,t.reason):"",h=t.advice?a(r,t.advice):"";if(f!==""||h!=="")u=f+(h!==""?"+"+h:"");break;case"message":if(t.data!=="")u=t.data;break;case"event":var l={name:t.name};if(t.args&&t.args.length){l.args=t.args}u=s.stringify(l);break;case"json":u=s.stringify(t.data);break;case"connect":if(t.qs)u=t.qs;break;case"ack":u=t.ackId+(t.args&&t.args.length?"+"+s.stringify(t.args):"");break}var d=[e,n+(p=="data"?"+":""),c];if(u!==null&&u!==undefined)d.push(u);return d.join(":")};n.encodePayload=function(t){var e="";if(t.length==1)return t[0];for(var n=0,o=t.length;n<o;n++){var i=t[n];e+="�"+i.length+"�"+t[n]}return e};var c=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(t){var e=t.match(c);if(!e)return{};var n=e[2]||"",t=e[5]||"",a={type:o[e[1]],endpoint:e[4]||""};if(n){a.id=n;if(e[3])a.ack="data";else a.ack=true}switch(a.type){case"error":var e=t.split("+");a.reason=i[e[0]]||"";a.advice=r[e[1]]||"";break;case"message":a.data=t||"";break;case"event":try{var p=s.parse(t);a.name=p.name;a.args=p.args}catch(u){}a.args=a.args||[];break;case"json":try{a.data=s.parse(t)}catch(u){}break;case"connect":a.qs=t||"";break;case"ack":var e=t.match(/^([0-9]+)(\+)?(.*)/);if(e){a.ackId=e[1];a.args=[];if(e[3]){try{a.args=e[3]?s.parse(e[3]):[]}catch(u){}}}break;case"disconnect":case"heartbeat":break}return a};n.decodePayload=function(t){if(t.charAt(0)=="�"){var e=[];for(var o=1,i="";o<t.length;o++){if(t.charAt(o)=="�"){e.push(n.decodePacket(t.substr(o+1).substr(0,i)));o+=Number(i)+1;i=""}else{i+=t.charAt(o)}}return e}else{return[n.decodePacket(t)]}}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(t,e){t.Transport=n;function n(t,e){this.socket=t;this.sessid=e}e.util.mixin(n,e.EventEmitter);n.prototype.heartbeats=function(){return true};n.prototype.onData=function(t){this.clearCloseTimeout();if(this.socket.connected||this.socket.connecting||this.socket.reconnecting){this.setCloseTimeout()}if(t!==""){var n=e.parser.decodePayload(t);if(n&&n.length){for(var o=0,i=n.length;o<i;o++){this.onPacket(n[o])}}}return this};n.prototype.onPacket=function(t){this.socket.setHeartbeatTimeout();if(t.type=="heartbeat"){return this.onHeartbeat()}if(t.type=="connect"&&t.endpoint==""){this.onConnect()}if(t.type=="error"&&t.advice=="reconnect"){this.isOpen=false}this.socket.onPacket(t);return this};n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var t=this;this.closeTimeout=setTimeout(function(){t.onDisconnect()},this.socket.closeTimeout)}};n.prototype.onDisconnect=function(){if(this.isOpen)this.close();this.clearTimeouts();this.socket.onDisconnect();return this};n.prototype.onConnect=function(){this.socket.onConnect();return this};n.prototype.clearCloseTimeout=function(){if(this.closeTimeout){clearTimeout(this.closeTimeout);this.closeTimeout=null}};n.prototype.clearTimeouts=function(){this.clearCloseTimeout();if(this.reopenTimeout){clearTimeout(this.reopenTimeout)}};n.prototype.packet=function(t){this.send(e.parser.encodePacket(t))};n.prototype.onHeartbeat=function(t){this.packet({type:"heartbeat"})};n.prototype.onOpen=function(){this.isOpen=true;this.clearCloseTimeout();this.socket.onOpen()};n.prototype.onClose=function(){var t=this;this.isOpen=false;this.socket.onClose();this.onDisconnect()};n.prototype.prepareUrl=function(){var t=this.socket.options;return this.scheme()+"://"+t.host+":"+t.port+"/"+t.resource+"/"+e.protocol+"/"+this.name+"/"+this.sessid};n.prototype.ready=function(t,e){e.call(this)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(t,e,n){t.Socket=o;function o(t){this.options={port:80,secure:false,document:"document"in n?document:false,resource:"socket.io",transports:e.transports,"connect timeout":1e4,"try multiple transports":true,reconnect:true,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":false,"auto connect":true,"flash policy port":10843,manualFlush:false};e.util.merge(this.options,t);this.connected=false;this.open=false;this.connecting=false;this.reconnecting=false;this.namespaces={};this.buffer=[];this.doBuffer=false;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||e.util.ua.hasCORS)){var o=this;e.util.on(n,"beforeunload",function(){o.disconnectSync()},false)}if(this.options["auto connect"]){this.connect()}}e.util.mixin(o,e.EventEmitter);o.prototype.of=function(t){if(!this.namespaces[t]){this.namespaces[t]=new e.SocketNamespace(this,t);if(t!==""){this.namespaces[t].packet({type:"connect"})}}return this.namespaces[t]};o.prototype.publish=function(){this.emit.apply(this,arguments);var t;for(var e in this.namespaces){if(this.namespaces.hasOwnProperty(e)){t=this.of(e);t.$emit.apply(t,arguments)}}};function i(){}o.prototype.handshake=function(t){var n=this,o=this.options;function r(e){if(e instanceof Error){n.connecting=false;n.onError(e.message)}else{t.apply(null,e.split(":"))}}var s=["http"+(o.secure?"s":"")+":/",o.host+":"+o.port,o.resource,e.protocol,e.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!e.util.ua.hasCORS){var a=document.getElementsByTagName("script")[0],c=document.createElement("script");c.src=s+"&jsonp="+e.j.length;a.parentNode.insertBefore(c,a);e.j.push(function(t){r(t);c.parentNode.removeChild(c)})}else{var p=e.util.request();p.open("GET",s,true);if(this.isXDomain()){p.withCredentials=true}p.onreadystatechange=function(){if(p.readyState==4){p.onreadystatechange=i;if(p.status==200){r(p.responseText)}else if(p.status==403){n.onError(p.responseText)}else{n.connecting=false;!n.reconnecting&&n.onError(p.responseText)}}};p.send(null)}};o.prototype.getTransport=function(t){var n=t||this.transports,o;for(var i=0,r;r=n[i];i++){if(e.Transport[r]&&e.Transport[r].check(this)&&(!this.isXDomain()||e.Transport[r].xdomainCheck(this))){return new e.Transport[r](this,this.sessionid)}}return null};o.prototype.connect=function(t){if(this.connecting){return this}var n=this;n.connecting=true;this.handshake(function(o,i,r,s){n.sessionid=o;n.closeTimeout=r*1e3;n.heartbeatTimeout=i*1e3;if(!n.transports)n.transports=n.origTransports=s?e.util.intersect(s.split(","),n.options.transports):n.options.transports;n.setHeartbeatTimeout();function a(t){if(n.transport)n.transport.clearTimeouts();n.transport=n.getTransport(t);if(!n.transport)return n.publish("connect_failed");n.transport.ready(n,function(){n.connecting=true;n.publish("connecting",n.transport.name);n.transport.open();if(n.options["connect timeout"]){n.connectTimeoutTimer=setTimeout(function(){if(!n.connected){n.connecting=false;if(n.options["try multiple transports"]){var t=n.transports;while(t.length>0&&t.splice(0,1)[0]!=n.transport.name){}if(t.length){a(t)}else{n.publish("connect_failed")}}}},n.options["connect timeout"])}})}a(n.transports);n.once("connect",function(){clearTimeout(n.connectTimeoutTimer);t&&typeof t=="function"&&t()})});return this};o.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);if(this.transport&&!this.transport.heartbeats())return;var t=this;this.heartbeatTimeoutTimer=setTimeout(function(){t.transport.onClose()},this.heartbeatTimeout)};o.prototype.packet=function(t){if(this.connected&&!this.doBuffer){this.transport.packet(t)}else{this.buffer.push(t)}return this};o.prototype.setBuffer=function(t){this.doBuffer=t;if(!t&&this.connected&&this.buffer.length){if(!this.options["manualFlush"]){this.flushBuffer()}}};o.prototype.flushBuffer=function(){this.transport.payload(this.buffer);this.buffer=[]};o.prototype.disconnect=function(){if(this.connected||this.connecting){if(this.open){this.of("").packet({type:"disconnect"})}this.onDisconnect("booted")}return this};o.prototype.disconnectSync=function(){var t=e.util.request();var n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,e.protocol,"",this.sessionid].join("/")+"/?disconnect=1";t.open("GET",n,false);t.send(null);this.onDisconnect("booted")};o.prototype.isXDomain=function(){var t=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=t};o.prototype.onConnect=function(){if(!this.connected){this.connected=true;this.connecting=false;if(!this.doBuffer){this.setBuffer(false)}this.emit("connect")}};o.prototype.onOpen=function(){this.open=true};o.prototype.onClose=function(){this.open=false;clearTimeout(this.heartbeatTimeoutTimer)};o.prototype.onPacket=function(t){this.of(t.endpoint).onPacket(t)};o.prototype.onError=function(t){if(t&&t.advice){if(t.advice==="reconnect"&&(this.connected||this.connecting)){this.disconnect();if(this.options.reconnect){this.reconnect()}}}this.publish("error",t&&t.reason?t.reason:t)};o.prototype.onDisconnect=function(t){var e=this.connected,n=this.connecting;this.connected=false;this.connecting=false;this.open=false;if(e||n){this.transport.close();this.transport.clearTimeouts();if(e){this.publish("disconnect",t);if("booted"!=t&&this.options.reconnect&&!this.reconnecting){this.reconnect()}}}};o.prototype.reconnect=function(){this.reconnecting=true;this.reconnectionAttempts=0;this.reconnectionDelay=this.options["reconnection delay"];var t=this,e=this.options["max reconnection attempts"],n=this.options["try multiple transports"],o=this.options["reconnection limit"];function i(){if(t.connected){for(var e in t.namespaces){if(t.namespaces.hasOwnProperty(e)&&""!==e){t.namespaces[e].packet({type:"connect"})}}t.publish("reconnect",t.transport.name,t.reconnectionAttempts)}clearTimeout(t.reconnectionTimer);t.removeListener("connect_failed",r);t.removeListener("connect",r);t.reconnecting=false;delete t.reconnectionAttempts;delete t.reconnectionDelay;delete t.reconnectionTimer;delete t.redoTransports;t.options["try multiple transports"]=n}function r(){if(!t.reconnecting){return}if(t.connected){return i()}if(t.connecting&&t.reconnecting){return t.reconnectionTimer=setTimeout(r,1e3)}if(t.reconnectionAttempts++>=e){if(!t.redoTransports){t.on("connect_failed",r);t.options["try multiple transports"]=true;t.transports=t.origTransports;t.transport=t.getTransport();t.redoTransports=true;t.connect()}else{t.publish("reconnect_failed");i()}}else{if(t.reconnectionDelay<o){t.reconnectionDelay*=2}t.connect();t.publish("reconnecting",t.reconnectionDelay,t.reconnectionAttempts);t.reconnectionTimer=setTimeout(r,t.reconnectionDelay)}}this.options["try multiple transports"]=false;this.reconnectionTimer=setTimeout(r,this.reconnectionDelay);this.on("connect",r)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(t,e){t.SocketNamespace=n;function n(t,e){this.socket=t;this.name=e||"";this.flags={};this.json=new o(this,"json");this.ackPackets=0;this.acks={}}e.util.mixin(n,e.EventEmitter);n.prototype.$emit=e.EventEmitter.prototype.emit;n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};n.prototype.packet=function(t){t.endpoint=this.name;this.socket.packet(t);this.flags={};return this};n.prototype.send=function(t,e){var n={type:this.flags.json?"json":"message",data:t};if("function"==typeof e){n.id=++this.ackPackets;n.ack=true;this.acks[n.id]=e}return this.packet(n)};n.prototype.emit=function(t){var e=Array.prototype.slice.call(arguments,1),n=e[e.length-1],o={type:"event",name:t};if("function"==typeof n){o.id=++this.ackPackets;o.ack="data";this.acks[o.id]=n;e=e.slice(0,e.length-1)}o.args=e;return this.packet(o)};n.prototype.disconnect=function(){if(this.name===""){this.socket.disconnect()}else{this.packet({type:"disconnect"});this.$emit("disconnect")}return this};n.prototype.onPacket=function(t){var n=this;function o(){n.packet({type:"ack",args:e.util.toArray(arguments),ackId:t.id})}switch(t.type){case"connect":this.$emit("connect");break;case"disconnect":if(this.name===""){this.socket.onDisconnect(t.reason||"booted")}else{this.$emit("disconnect",t.reason)}break;case"message":case"json":var i=["message",t.data];if(t.ack=="data"){i.push(o)}else if(t.ack){this.packet({type:"ack",ackId:t.id})}this.$emit.apply(this,i);break;case"event":var i=[t.name].concat(t.args);if(t.ack=="data")i.push(o);this.$emit.apply(this,i);break;case"ack":if(this.acks[t.ackId]){this.acks[t.ackId].apply(this,t.args);delete this.acks[t.ackId]}break;case"error":if(t.advice){this.socket.onError(t)}else{if(t.reason=="unauthorized"){this.$emit("connect_failed",t.reason)}else{this.$emit("error",t.reason)}}break}};function o(t,e){this.namespace=t;this.name=e}o.prototype.send=function(){this.namespace.flags[this.name]=true;this.namespace.send.apply(this.namespace,arguments)};o.prototype.emit=function(){this.namespace.flags[this.name]=true;this.namespace.emit.apply(this.namespace,arguments)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(t,e,n){t.websocket=o;function o(t){e.Transport.apply(this,arguments)}e.util.inherit(o,e.Transport);o.prototype.name="websocket";o.prototype.open=function(){var t=e.util.query(this.socket.options.query),o=this,i;if(!i){i=n.MozWebSocket||n.WebSocket}this.websocket=new i(this.prepareUrl()+t);this.websocket.onopen=function(){o.onOpen();o.socket.setBuffer(false)};this.websocket.onmessage=function(t){o.onData(t.data)};this.websocket.onclose=function(){o.onClose();o.socket.setBuffer(true)};this.websocket.onerror=function(t){o.onError(t)};return this};if(e.util.ua.iDevice){o.prototype.send=function(t){var e=this;setTimeout(function(){e.websocket.send(t)},0);return this}}else{o.prototype.send=function(t){this.websocket.send(t);return this}}o.prototype.payload=function(t){for(var e=0,n=t.length;e<n;e++){this.packet(t[e])}return this};o.prototype.close=function(){this.websocket.close();return this};o.prototype.onError=function(t){this.socket.onError(t)};o.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};o.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n};o.xdomainCheck=function(){return true};e.transports.push("websocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(t,e,n){t.XHR=o;function o(t){if(!t)return;e.Transport.apply(this,arguments);this.sendBuffer=[]}e.util.inherit(o,e.Transport);o.prototype.open=function(){this.socket.setBuffer(false);this.onOpen();this.get();this.setCloseTimeout();return this};o.prototype.payload=function(t){var n=[];for(var o=0,i=t.length;o<i;o++){n.push(e.parser.encodePacket(t[o]))}this.send(e.parser.encodePayload(n))};o.prototype.send=function(t){this.post(t);return this};function i(){}o.prototype.post=function(t){var e=this;this.socket.setBuffer(true);function o(){if(this.readyState==4){this.onreadystatechange=i;e.posting=false;if(this.status==200){e.socket.setBuffer(false)}else{e.onClose()}}}function r(){this.onload=i;e.socket.setBuffer(false)}this.sendXHR=this.request("POST");if(n.XDomainRequest&&this.sendXHR instanceof XDomainRequest){this.sendXHR.onload=this.sendXHR.onerror=r}else{this.sendXHR.onreadystatechange=o}this.sendXHR.send(t)};o.prototype.close=function(){this.onClose();return this};o.prototype.request=function(t){var n=e.util.request(this.socket.isXDomain()),o=e.util.query(this.socket.options.query,"t="+ +new Date);n.open(t||"GET",this.prepareUrl()+o,true);if(t=="POST"){try{if(n.setRequestHeader){n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}else{n.contentType="text/plain"}}catch(i){}}return n};o.prototype.scheme=function(){return this.socket.options.secure?"https":"http"};o.check=function(t,o){try{var i=e.util.request(o),r=n.XDomainRequest&&i instanceof XDomainRequest,s=t&&t.options&&t.options.secure?"https:":"http:",a=n.location&&s!=n.location.protocol;if(i&&!(r&&a)){return true}}catch(c){}return false};o.xdomainCheck=function(t){return o.check(t,true)}})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(t,e){t.htmlfile=n;function n(t){e.Transport.XHR.apply(this,arguments)}e.util.inherit(n,e.Transport.XHR);n.prototype.name="htmlfile";n.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile");this.doc.open();this.doc.write("<html></html>");this.doc.close();this.doc.parentWindow.s=this;var t=this.doc.createElement("div");t.className="socketio";this.doc.body.appendChild(t);this.iframe=this.doc.createElement("iframe");t.appendChild(this.iframe);var n=this,o=e.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+o;e.util.on(window,"unload",function(){n.destroy()})};n.prototype._=function(t,e){t=t.replace(/\\\//g,"/");this.onData(t);try{var n=e.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(o){}};n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(t){}this.doc=null;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;CollectGarbage()}};n.prototype.close=function(){this.destroy();return e.Transport.XHR.prototype.close.call(this)};n.check=function(t){if(typeof window!="undefined"&&["Active"].concat("Object").join("X")in window){try{var n=new(window[["Active"].concat("Object").join("X")])("htmlfile");return n&&e.Transport.XHR.check(t)}catch(o){}}return false};n.xdomainCheck=function(){return false};e.transports.push("htmlfile")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(t,e,n){t["xhr-polling"]=o;function o(){e.Transport.XHR.apply(this,arguments)}e.util.inherit(o,e.Transport.XHR);e.util.merge(o,e.Transport.XHR);o.prototype.name="xhr-polling";o.prototype.heartbeats=function(){return false};o.prototype.open=function(){var t=this;e.Transport.XHR.prototype.open.call(t);return false};function i(){}o.prototype.get=function(){if(!this.isOpen)return;var t=this;function e(){if(this.readyState==4){this.onreadystatechange=i;if(this.status==200){t.onData(this.responseText);t.get()}else{t.onClose()}}}function o(){this.onload=i;this.onerror=i;t.retryCounter=1;t.onData(this.responseText);t.get()}function r(){t.retryCounter++;if(!t.retryCounter||t.retryCounter>3){t.onClose()}else{t.get()}}this.xhr=this.request();if(n.XDomainRequest&&this.xhr instanceof XDomainRequest){this.xhr.onload=o;this.xhr.onerror=r}else{this.xhr.onreadystatechange=e}this.xhr.send(null)};o.prototype.onClose=function(){e.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(t){}this.xhr=null}};o.prototype.ready=function(t,n){var o=this;e.util.defer(function(){n.call(o)})};e.transports.push("xhr-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(t,e,n){var o=n.document&&"MozAppearance"in n.document.documentElement.style;t["jsonp-polling"]=i;function i(t){e.Transport["xhr-polling"].apply(this,arguments);this.index=e.j.length;var n=this;e.j.push(function(t){n._(t)})}e.util.inherit(i,e.Transport["xhr-polling"]);i.prototype.name="jsonp-polling";i.prototype.post=function(t){var n=this,o=e.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var i=document.createElement("form"),r=document.createElement("textarea"),s=this.iframeId="socketio_iframe_"+this.index,a;i.className="socketio";i.style.position="absolute";i.style.top="0px";i.style.left="0px";i.style.display="none";i.target=s;i.method="POST";i.setAttribute("accept-charset","utf-8");r.name="d";i.appendChild(r);document.body.appendChild(i);this.form=i;this.area=r}this.form.action=this.prepareUrl()+o;function c(){p();n.socket.setBuffer(false)}function p(){if(n.iframe){n.form.removeChild(n.iframe)}try{a=document.createElement('<iframe name="'+n.iframeId+'">')}catch(t){a=document.createElement("iframe");a.name=n.iframeId}a.id=n.iframeId;n.form.appendChild(a);n.iframe=a}p();this.area.value=e.JSON.stringify(t);try{this.form.submit()}catch(u){}if(this.iframe.attachEvent){a.onreadystatechange=function(){if(n.iframe.readyState=="complete"){c()}}}else{this.iframe.onload=c}this.socket.setBuffer(true)};i.prototype.get=function(){var t=this,n=document.createElement("script"),i=e.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}n.async=true;n.src=this.prepareUrl()+i;n.onerror=function(){t.onClose()};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r);this.script=n;if(o){setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t);document.body.removeChild(t)},100)}};i.prototype._=function(t){this.onData(t);if(this.isOpen){this.get()}return this};i.prototype.ready=function(t,n){var i=this;if(!o)return n.call(this);e.util.load(function(){n.call(i)})};i.check=function(){return"document"in n};i.xdomainCheck=function(){return true};e.transports.push("jsonp-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);if(typeof define==="function"&&define.amd){define([],function(){return io})}})();